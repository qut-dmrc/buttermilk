<select 
    id="criteria" 
    name="criteria" 
    class="select select-bordered w-full"
    x-model="selectedCriteria"
    hx-get="/dash/api/records/" 
    hx-include="[name='flow']" 
    hx-target="#record-container"
    hx-trigger="change"
    hx-indicator=".record-loader">
    <option value="">Select criteria</option>
    {% for criterion in criteria %}
    <option value="{{ criterion }}">{{ criterion }}</option>
    {% endfor %}
</select>
<div class="criteria-loader htmx-indicator mt-2">
    <span class="loading loading-dots loading-sm"></span>
</div>

<script>
// Force Alpine.js to initialize this component
document.addEventListener('DOMContentLoaded', function() {
    if (window.Alpine) {
        console.log('Re-initializing Alpine.js on criteria container');
        window.Alpine.initTree(document.getElementById('criteria-container'));
    }
});
</script>
