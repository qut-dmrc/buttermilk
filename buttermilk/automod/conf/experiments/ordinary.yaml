# @package _global_
project:
  name: automod
  job: modsynth
run:
  platform: local
save:
  destination: bq
  dataset: dmrc-analysis.toxicity.step
  schema: buttermilk/schemas/step.json

experiments:
  judge:
    num_runs: 4
    parameters: null
    init:
      template_path: judge.jinja2
      other_template_paths:
        criteria: criteria_ordinary.jinja2
      concurrent: 4
    #model: ['haiku']
    model:
      - o1-preview
      - llama31_70b
      - llama31_8b
      - llama31_405b
      - gpt4o
      - opus
      - sonnet
      - gemini15pro
    data:
      - name: drag queens - alt text
        type: file
        uri: gs://dmrc-platforms/data/drag_train.jsonl
        columns:
          record_id: id
          content: alt_text
          groundtruth: expected
  synth:
    init:
      template_path: synthesise.jinja2
      other_template_paths:
        original_instructions: criteria_ordinary.jinja2
    num_runs: 1
    parameters: null
    model:
      - o1-preview
      - gpt4o
      - opus
      - sonnet
      - gemini15pro
    data:
      - type: file
        name: drag
        uri: gs://dmrc-platforms/data/drag_train.jsonl
        columns:
          record_id: id
          content: alt_text
          groundtruth: expected
      - type: job
        name: mod
        dataset: dmrc-analysis.toxicity.step
        filter: null
        group:
          - record_id
        columns:
          draft: outputs