osb_json:
  type: gcs
  path: gs://prosocial-public/osb/03_osb_fulltext_summaries.json
  columns:
    record_id: record_id
    content: fulltext  # Full text for vector processing
    metadata: 
      # Core case information
      title: title
      description: content  # Actual case description (different from fulltext)
      result: result
      type: type
      location: location
      case_date: case_date
      
      # Structured arrays (preserved as JSON)
      topics: topics
      standards: standards  
      reasons: reasons
      recommendations: recommendations
      
      # Process metadata
      job_id: job_id
      timestamp: timestamp

osb_vector:
  type: chromadb
  persist_directory: "gs://prosocial-dev/data/osb/chromadb"
  collection_name: "osb_fulltext"
  embedding_model: "gemini-embedding-001"
  dimensionality: 3072
  multi_field_embedding:
    content_field: "content"  # fulltext for main content chunking
    chunk_size: 1200
    chunk_overlap: 400
    additional_fields:
      - source_field: "title"
        chunk_type: "title"
        min_length: 10
      - source_field: "description"  # actual case description
        chunk_type: "case_description"
        min_length: 50
      - source_field: "reasons"  # array of reasons - will be joined
        chunk_type: "reasoning"
        min_length: 100
      - source_field: "recommendations"  # array of recommendations
        chunk_type: "recommendations"
        min_length: 50